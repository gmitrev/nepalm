<% content_for :title do %>
  <%= @project.name %>
  <i class='fa fa-angle-right'></i>
  <%= @stack.name %>
<% end %>

<div class="row mt">
  <div class="col-md-12">
    <section class="task-panel tasks-widget">
      <div class="panel-heading">
        <div class="pull-left"><h4><i class="fa fa-tasks"></i> Tasks </h4></div>
        <br>
      </div>
      <div class="panel-body">
        <div class="task-content">

          <%= form_for([@project, @stack, @stack.task_list, @stack.task_list.tasks.build], remote: true) do |f| %>
            <%= f.text_field :name,
              class: 'form-control',
              placeholder: 'Enter new task' %>
          <% end %>

          <br />


            <ul id='task_list' class="task-list">
              <% @stack.task_list.tasks.each do |task| %>
                <%= render partial: 'tasks/task', locals: {task: task} %>
              <% end %>
            </ul>


          <% if @stack.task_list.tasks.none? %>

            <div id='no-tasks-msg' class="alert alert-info">
              <b>No tasks yet. </b> Create the first one from the form above!
            </div>

          <% end %>
        </div>

        <div class="add-task-row hide">
          <a class="btn btn-success btn-sm pull-left" href="todo_list.html#">Add New Tasks</a>
          <a class="btn btn-default btn-sm pull-right" href="todo_list.html#">See All Tasks</a>
        </div>
      </div>
    </section>
  </div><!-- /col-md-12-->

  <div class="col-md-12">
    <section class="task-panel tasks-widget">
      <div class="panel-heading">
        <div class="pull-left"><h4><i class="fa fa-comments"></i> Discussion </h4></div>
        <br>
      </div>
      <div class="panel-body">
        <div class="task-content">

          <div id="comments">
            <% if @stack.comments.none? %>
              <div id='no-comments-msg' class="alert alert-info">
                <b>No comments yet. </b> Create the first one from the form below.
              </div>
            <% else %>
              <% @stack.comments.order("created_at ASC").each do |comment| %>
                  <%= render partial: 'comments/comment', locals: { comment: comment } %>
              <% end %>
            <% end %>
          </div>

          <br />

          <%= form_for([@project, @stack, @stack.comments.build], remote: true) do |f| %>
            <%= f.text_area :body,
              class: 'form-control',
              placeholder: 'Enter comment' %>

            <br />
            <%= f.submit "Post comment", class: "btn btn-success btn-sm" %>
          <% end %>

        </div>

      </div>
    </section>
  </div><!-- /col-md-12-->
</div><!-- /row -->
